        function renderTunnels(tunnels) {
            const tbody = document.getElementById('tunnel-list');
            tbody.innerHTML = '';
            
            if (!tunnels || Object.keys(tunnels).length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; color: #888;">No active tunnels</td></tr>';
                return;
            }

            for (const [id, info] of Object.entries(tunnels)) {
                const tr = document.createElement('tr');
                const typeBadge = info.type === 'http' 
                    ? '<span class="badge badge-http">HTTP</span>' 
                    : '<span class="badge badge-tcp">TCP</span>';
                
                // Use pre-calculated endpoint from server or fallback
                const endpoint = info.endpoint || (info.type === 'http' ? `http://${info.subdomain}.vozi.duckdns.org` : `:${info.publicPort}`);

                tr.innerHTML = `
                    <td>${id.substring(0, 8)}...</td>
                    <td>${typeBadge}</td>
                    <td><a href="${endpoint}" target="_blank" style="color: #9cdcfe;">${endpoint}</a></td>
                    <td class="status-active">Active</td>
                    <td><button onclick="killTunnel('${id}')">Kill</button></td>
                `;
                tbody.appendChild(tr);
            }
        }
